---
import { CollectionEntry, getCollection } from "astro:content";
import { Image } from "astro:assets";
import Layout from "../../layouts/Layout.astro";

import Container from "../../components/Container.astro";
import Section from "../../components/Section.astro";
import Header from "../../components/Header.astro";
import Subheading from "../../components/Subheading.astro";

const collection: CollectionEntry<"notes"> = await getCollection("notes");

const notes = collection.sort(
  (a, b) =>
    new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf()
);

const format = (date: Date) => {
  return date.toLocaleDateString("en-us", {
    weekday: "long",
    month: "short",
    year: "numeric",
    day: "numeric",
  });
};
---

<Layout>
  <Section id="hero">
    <Container classList="py-20 md:py-36 px-6 md:px-10 space-y-12">
      <Header>My Zettelkasten</Header>
      <Subheading classList={"max-w-2xl my-6"}>
        My personal Zettelkasten: Notes on things I find useful or interesting.
      </Subheading>
    </Container>
  </Section>

  <Section id="blog">
    <Container classList="px-6 lg:px-8 py-24 sm:py-32">
      <div class="mx-auto mt-16 grid max-w-2xl grid-cols-1 gap-x-8 gap-y-20 lg:mx-0 lg:max-w-none lg:grid-cols-3">
        
        <div class="flex flex-col gap-16">
          {notes.map((note) => (
            <article class="group relative flex flex-col items-start">
              <h2 class="text-base font-semibold tracking-tight">
                <div class="absolute -inset-x-4 -inset-y-6 z-0 scale-95 bg-zinc-50 opacity-0 transition group-hover:scale-100 group-hover:opacity-100 sm:-inset-x-6 sm:rounded-2xl dark:bg-zinc-800/50"></div>
                <a href={`/zet/${note.slug}`}>
                  <span class="absolute -inset-x-4 -inset-y-6 z-20 sm:-inset-x-6 sm:rounded-2xl"></span>
                  <span class="relative z-10">
                    {note.data.title}
                  </span>
                </a>
              </h2>
              <time class="relative z-10 order-first mb-3 flex items-center text-sm text-zinc-400 dark:text-zinc-500 pl-3.5" datetime={note.data.date}>
                <span class="absolute inset-y-0 left-0 flex items-center" aria-hidden="true">
                  <span class="h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span>
                </span>
                {format(note.data.date)}
              </time>
              <div aria-hidden="true" class="relative z-10 mt-4 flex items-center text-sm font-medium text-teal-500">
                Read note
                <svg viewBox="0 0 16 16" fill="none" aria-hidden="true" class="ml-1 h-4 w-4 stroke-current">
                  <path d="M6.75 5.75 9.25 8l-2.5 2.25" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </div>
            </article>
          ))}
        </div>
      </div>
    </Container>
  </Section>
</Layout>

---