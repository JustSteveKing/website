---
import { Image } from 'astro:assets'
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';

import {
	share,
} from "./../lib";

import H2 from '../components/H2.astro';
import Header from '../components/Header.astro';
import List from '../components/List.astro';
import ListItem from '../components/ListItem.astro';
import Paragraph from '../components/Paragraph.astro';
import Section from '../components/Section.astro';
import SocialLinks from '../components/SocialLinks.astro';
import Subheading from '../components/Subheading.astro';
import { SITE_TITLE } from '../config';
import PostCard from '../components/PostCard.astro';
import Testimonial from "./../components/Testimonial.astro";

import laracon from './../assets/images/laracon-eu.jpg';
import speaking from './../assets/images/talking.png';
import writing from './../assets/images/writing.png';
import youtube from './../assets/images/youtube.png';
import phparch from '../assets/images/logos/phparch.svg';
import laravelnews from '../assets/images/logos/laravelnews.svg';
import youtubelogo from '../assets/images/logos/youtube.svg';
import treblle from '../assets/images/logos/treblle.svg';
import Container from '../components/Container.astro';

const testimonials = await getCollection('testimonials');
const testimonial = testimonials[Math.floor(Math.random() * testimonials.length)]

const collection = await getCollection('posts');
const posts = collection.sort(
	(a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()
);

const sponsors = await getCollection('sponsors');
---

<Layout>
	<Section id="hero">
		<Container classList="py-20 md:py-36 px-6 md:px-10 space-y-12">
			<Header>
				JustSteveKing
			</Header>
			<Subheading classList={'max-w-2xl my-6'}>
				Welcome to my website, the realm of the API Guy. Led by a seasoned Consultant CTO, Software Engineer, Developer Advocate, and renowned Conference Speaker.
			</Subheading>
			<div class="flex gap-6">
				<SocialLinks />
			</div>
		</Container>
	</Section>

	<Section id="sponsors">
		<Container classList="py-20 md:py-36 px-6 md:px-10">
			<div class="mt-16 flex justify-left">
				<Paragraph classList="text-xl relative px-4 py-1.5">
					<span class="hidden md:inline leading-9">
						Checkout my sponsors, they do awesome things! I only accept sponsors I believe in or would actually use.<br />
						Interested? Reach out on twitter.
					</span>
				</Paragraph>
			</div>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4">
				{sponsors.map((sponsor) => (
					<a target="_blank" rel="noopener nofollow" href={share(sponsor.data.website, 'sponsor', 'juststeveking+sponsorship')} class="col-span-1 flex flex-col gap-10 pt-6 md:pt-12 sm:flex-row">
							<Image
								src={sponsor.data.logo}
								alt={sponsor.data.name}
								width={158}
								height={48}
								class="aspect-[4/5] w-36 md:w-52 flex-none rounded-2xl object-contain"
							/>
							<div class="max-w-xl flex-auto">
								<h3 class="text-lg font-semibold leading-8 tracking-wider">
									{sponsor.data.name}
								</h3>
								<p class="text-sm md:text-md leading-7">
									{sponsor.data.website}
								</p>
								<p class="mt-6 text-base leading-7 text-gray-600">
									{sponsor.data.bio}
								</p>
							</div>
						</a>
				))}
			</div>
		</Container>
	</Section>

	<Section id="about">
		<Container classList="px-6 lg:px-8 py-24 sm:py-32">
			<div class="grid grid-cols-1 gap-y-6 lg:grid-cols-2 lg:grid-rows-[auto_1fr] lg:gap-y-12">
				<div class="lg:pl-20">
					<div class="max-w-xs px-2.5 lg:max-w-none">
						<Image
							src={laracon}
							alt={SITE_TITLE}
							class="aspect-auto rotate-3 rounded-2xl bg-zinc-100 object-cover dark:bg-zinc-800"
							height={800}
							width={800}
						/>
					</div>
				</div>
				<div class="lg:order-first lg:row-span-2">
					<H2>
						Who is Steve?
					</H2>
					<div class="mt-6 space-y-6 md:space-y-12 text-base">
						<Paragraph>
							Hey there! I'm Steve McDougall, but in the tech community, I'm often known as JustSteveKing. I'm a tech enthusiast from the scenic Welsh Valleys who loves diving into the complexities of software engineering, especially PHP and Laravel.
						</Paragraph>
						<Paragraph>
							My day-to-day role as a Developer Advocate at Treblle has me exploring the intricacies of REST-based APIs. It's a space where I get to blend my technical skills with my passion for making complex things simple for other engineers and DevOps teams.
						</Paragraph>
						<Paragraph>
							But that's just one side of the coin. In the digital realm, I'm also deeply engaged in sharing knowledge and experiences. Whether it's through my writings, my YouTube channel, or speaking at various tech events, I'm all about demystifying technology and empowering fellow developers.
						</Paragraph>
						<Paragraph>
							I believe in the power of community and continual learning. For me, it's not just about writing code; it's about connecting, sharing, and growing together. So, join me on this journey of exploration and discovery in the world of tech!
						</Paragraph>
					</div>
				</div>
				<List classList="lg:pl-20">
					<ListItem classList="flex">
						<a target="_blank" rel="noopener nofollow" title="Visit the Treblle website" class="group flex text-sm font-medium text-zinc-800 transition hover:underline" href={share('https://www.treblle.com/', 'work', 'juststeveking+website')}>
							<Image
								src={treblle}
								alt={'Treblle'}
								height={24}
								width={24}
								class="h-6 w-6 flex-none transition"
							/>
							<span class="ml-4">Developer Relations at Treblle</span>
						</a>
					</ListItem>
					<ListItem classList="flex">
						<a target="_blank" rel="noopener nofollow" title="Visit my YouTube Channel" class="group flex text-sm font-medium text-zinc-800 transition hover:underline" href={share('https://www.youtube.com/c/juststeveking', 'work', 'juststeveking+website')}>
							<Image
								src={youtubelogo}
								alt={'YouTube'}
								height={24}
								width={24}
								class="h-6 w-6 flex-none transition"
							/>
							<span class="ml-4">Content Creator on YouTube</span>
						</a>
					</ListItem>
					<ListItem classList="flex">
						<a target="_blank" rel="noopener nofollow" title="Visit Laravel News" class="group flex text-sm font-medium text-zinc-800 transition hover:underline" href={share('https://laravel-news.com/@juststeveking', 'work', 'juststeveking+website')}>
							<Image
								src={laravelnews}
								alt={'Laravel News'}
								height={24}
								width={24}
								class="h-6 w-6 flex-none transition"
							/>
							<span class="ml-4">Writer at Laravel News</span>
						</a>
					</ListItem>
					<ListItem classList="flex">
						<a target="_blank" rel="noopener nofollow" title="Visit Laravel News" class="group flex text-sm font-medium text-zinc-800 transition hover:underline" href={share('https://www.phparch.com/community/steve-mcdougall/', 'work', 'juststeveking+website')}>
							<Image
								src={phparch}
								alt={'PHP Architect'}
								height={24}
								width={24}
								class="h-6 w-6 flex-none transition"
							/>
							<span class="ml-4">Columnist at PhpArchitect</span>
						</a>
					</ListItem>
				</List>
			</div>
		</Container>
	</Section>

	<Section id="blog">
		<Container classList="px-6 lg:px-8 py-24 sm:py-32">
			<H2>
				Latest Posts
			</H2>
			<Subheading>
				A collection of my latest blog posts.
			</Subheading>
	
			<div class="mx-auto mt-10 grid max-w-2xl grid-cols-1 gap-x-6 md:gap-y-12 gap-y-6 md:gap-y-12 lg:mx-0 lg:max-w-none lg:grid-cols-2">
				{posts.slice(0,6).map(post => (
					<PostCard post={post} />
				))}
			</div>
		</Container>
	</Section>

	<Section id="testimonials">
		<Container classList="px-6 lg:px-8 py-24 sm:py-32">
			<div class="relative mx-auto max-w-2xl py-24 sm:py-32 lg:max-w-4xl">
				<div class="absolute left-1/2 top-0 -z-10 h-[50rem] w-[90rem] -translate-x-1/2 opacity-20 lg:left-36"></div>
				<div class="absolute inset-y-0 right-1/2 -z-10 mr-12 w-[150vw] origin-bottom-left skew-x-[-30deg] shadow-2xl sm:mr-20 md:mr-0 lg:right-full lg:-mr-36 lg:origin-center"></div>

				<Testimonial testimonial={testimonial}/>
			</div>
		</Container>
	</Section>

	<Section id="work">
		<Container classList="px-6 lg:px-8 py-24 sm:py-32">
			<div class="mx-auto grid max-w-2xl grid-cols-1 gap-x-12 gap-y-16 lg:mx-0 lg:min-w-full lg:max-w-none lg:flex-none lg:gap-y-8">
				<div class="lg:col-end-1 lg:w-full lg:max-w-lg lg:pb-8 space-y-4">
					<H2>
						Want to work with me?
					</H2>
					<Paragraph>
						I reguarly work with others giving talks, mentoring, and consulting. Feel free to reach out on any of my social channels if you want to work together.
					</Paragraph>
				</div>
				<div class="flex flex-wrap items-start justify-end gap-6 sm:gap-8 lg:contents">
					<div class="contents lg:col-span-2 lg:col-end-2 lg:ml-auto lg:flex lg:w-[37rem] lg:items-start lg:justify-end lg:gap-x-8">
						<div class="order-first flex w-64 flex-none justify-end self-end lg:w-auto">
							<Image
								src={speaking}
								class="aspect-[4/3] w-[24rem] max-w-none flex-none rounded-2xl object-cover object-top"
								alt={'Speaking'}
							/>
						</div>
						<div class="flex w-96 flex-auto justify-end lg:w-auto lg:flex-none">
							<Image
								src={youtube}
								alt={'YouTube'}
								class="aspect-[7/5] w-[37rem] max-w-none flex-none rounded-2xl object-cover object-center"
							/>
						</div>
						<div class="hidden sm:block sm:w-0 sm:flex-auto lg:w-auto lg:flex-none">
							<Image
								src={writing}
								alt={'Writing'}
								class="aspect-[4/3] w-[24rem] max-w-none rounded-2xl object-cover object-top"
							/>
						</div>
					</div>
				</div>
			</div>
		</Container>
	</Section>
</Layout>

